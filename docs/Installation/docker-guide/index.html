<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Installation/docker-guide">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Running Stable Diffusion WebUI Using Docker | Sygil WebUI</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://sygil-dev.github.io/sygil-webui/docs/Installation/docker-guide"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Running Stable Diffusion WebUI Using Docker | Sygil WebUI"><meta data-rh="true" name="description" content="&lt;!--"><meta data-rh="true" property="og:description" content="&lt;!--"><link data-rh="true" rel="canonical" href="https://sygil-dev.github.io/sygil-webui/docs/Installation/docker-guide"><link data-rh="true" rel="alternate" href="https://sygil-dev.github.io/sygil-webui/docs/Installation/docker-guide" hreflang="en"><link data-rh="true" rel="alternate" href="https://sygil-dev.github.io/sygil-webui/docs/Installation/docker-guide" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/sygil-webui/blog/rss.xml" title="Sygil WebUI RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/sygil-webui/blog/atom.xml" title="Sygil WebUI Atom Feed"><link rel="stylesheet" href="/sygil-webui/assets/css/styles.02b0c6c6.css">
<link rel="preload" href="/sygil-webui/assets/js/runtime~main.aaaad360.js" as="script">
<link rel="preload" href="/sygil-webui/assets/js/main.c75f4128.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/sygil-webui/"><b class="navbar__title text--truncate">Sygil WebUI</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/sygil-webui/docs/Installation/one-click-installer">Getting Started</a><a class="navbar__item navbar__link" href="/sygil-webui/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Sygil-Dev/sygil-webui" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/sygil-webui/docs/Installation/one-click-installer">Installation</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sygil-webui/docs/Installation/one-click-installer">Installer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sygil-webui/docs/Installation/windows-installation">Manual Windows Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sygil-webui/docs/Installation/linux-installation">Manual Linux Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/sygil-webui/docs/Installation/docker-guide">Running Stable Diffusion WebUI Using Docker</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/sygil-webui/docs/Streamlit/streamlit-interface">Streamlit</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sygil-webui/docs/Streamlit/streamlit-interface">Streamlit Web UI Interface</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/sygil-webui/docs/Gradio/gradio-interface">Gradio</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sygil-webui/docs/Gradio/gradio-interface">Gradio Web UI Interface</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sygil-webui/docs/post-processing">Post Processing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sygil-webui/docs/concepts-library">SD Concepts Library</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sygil-webui/docs/custom-models">Custom Models</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/sygil-webui/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Installation</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Running Stable Diffusion WebUI Using Docker</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Running Stable Diffusion WebUI Using Docker</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="running-prebuilt-image">Running prebuilt image<a class="hash-link" href="#running-prebuilt-image" title="Direct link to heading">​</a></h2><p>The easiest way to run Stable Diffusion WebUI is to use the prebuilt image from Docker Hub.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> pull hlky/sd-webui:runpod</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This image has all the necessary models baked in. It is quite large but streamlines the process of managing the various models and simplifies the user experience.</p><p>Alternatively you can pull:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> pull hlky/sd-webui:latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This image includes the babrebones environment to run the Web UI. The models will be downloaded during the installation process. You will have to take care of the volume for the <code>sd/models</code> directory.</p><p>It is recommended that you run the <code>runpod</code> version.
You can run the image using the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> container run --rm -d -p </span><span class="token number" style="color:#36acaa">8501</span><span class="token plain">:8501 -e </span><span class="token assign-left variable" style="color:#36acaa">STREAMLIT_SERVER_HEADLESS</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true -e </span><span class="token string" style="color:#e3116c">&quot;WEBUI_SCRIPT=webui_streamlit.py&quot;</span><span class="token plain"> -e </span><span class="token string" style="color:#e3116c">&quot;VALIDATE_MODELS=false&quot;</span><span class="token plain"> -v </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${</span><span class="token string variable environment constant" style="color:#36acaa">PWD</span><span class="token string variable" style="color:#36acaa">}</span><span class="token string" style="color:#e3116c">/outputs:/sd/outputs&quot;</span><span class="token plain"> --gpus all hlky/sd-webui:runpod</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Note: if you are running it on runpod it only supports one volume mount which is used for your outputs.</p></blockquote><blockquote><p>Note: if you are running it on your local machine the output directory will be created in the current directory from where you run this command.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="building-the-image">Building the image<a class="hash-link" href="#building-the-image" title="Direct link to heading">​</a></h2><p>This Docker environment is intended to speed up development and testing of Stable Diffusion WebUI features. Use of a container image format allows for packaging and isolation of Stable Diffusion / WebUI&#x27;s dependencies separate from the Host environment.</p><p>You can use this Dockerfile to build a Docker image and run Stable Diffusion WebUI locally.</p><p>Requirements:</p><ul><li>Host computer is AMD64 architecture (e.g. Intel/AMD x86 64-bit CPUs)</li><li>Host computer operating system (Linux or Windows with WSL2 enabled)<ul><li>See <!-- -->[Microsoft WSL2 Installation Guide for Windows 10]<!-- --> (<a href="https://learn.microsoft.com/en-us/windows/wsl/" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/en-us/windows/wsl/</a>) for more information on installing.</li><li>Ubuntu (Default) for WSL2 is recommended for Windows users </li></ul></li><li>Host computer has Docker, or compatible container runtime<ul><li>Docker Compose (v1.29+) or later </li><li>See <!-- -->[Install Docker Engine]<!-- --> (<a href="https://docs.docker.com/engine/install/#supported-platforms" target="_blank" rel="noopener noreferrer">https://docs.docker.com/engine/install/#supported-platforms</a>) to learn more about installing Docker on your Linux operating system</li></ul></li><li>10+ GB Free Disk Space (used by Docker base image, the Stable Diffusion WebUI Docker image for dependencies, model files/weights)</li></ul><p>Additional Requirements:</p><ul><li>Host computer is equipped with a CUDA-compatible GPU (e.g. Nvidia RTX 2xxx, 3000x)</li><li>NVIDIA Container Toolkit is installed<ul><li>See <!-- -->[NVIDIA Container Toolkit Installation Guide]<!-- --> (<a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html#supported-platforms" target="_blank" rel="noopener noreferrer">https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html#supported-platforms</a> &quot;Official NVIDIA Installation Guide&quot;) for more information on installing.</li></ul></li></ul><p>Other Notes:</p><ul><li>&quot;Optional&quot; packages commonly used with Stable Diffusion WebUI workflows such as, RealESRGAN, GFPGAN, will be installed by default.</li><li>An older version of running Stable Diffusion WebUI using Docker exists here: <a href="https://github.com/Sygil-Dev/sygil-webui/discussions/922" target="_blank" rel="noopener noreferrer">https://github.com/Sygil-Dev/sygil-webui/discussions/922</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="but-what-about-amd">But what about AMD?<a class="hash-link" href="#but-what-about-amd" title="Direct link to heading">​</a></h3><p>There is tentative support for AMD GPUs through docker which can be enabled via <code>docker-compose.amd.yml</code>,
although this is still in the early stages. Right now, this <em>only</em> works on native linux (not WSL2) due
to issues with AMDs support of GPU passthrough. You also <em>must</em> have ROCm drivers installed on the host.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    docker compose -f docker-compose.yml -f docker-compose.amd.yml ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>or, by setting </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    export COMPOSE_FILE=docker-compose.yml:docker-compose.amd.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>in your <code>.profile</code> or through a tool like <code>direnv</code></p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="first-time-startup-instructions">First-Time Startup Instructions<a class="hash-link" href="#first-time-startup-instructions" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="clone-repository">Clone Repository<a class="hash-link" href="#clone-repository" title="Direct link to heading">​</a></h3><ul><li>Clone this repository to your host machine:<ul><li><code>git clone https://github.com/Sygil-Dev/sygil-webui.git</code></li></ul></li><li>If you plan to use Docker Compose to run the image in a container (most users), create an <code>.env_docker</code> file using the example file:<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">* `cp .env_docker.example .env_docker`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Edit `.env_docker` using the text editor of your choice.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Ensure `VALIDATE_MODELS` is set to `true`</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Options available in <code>.env_docker</code> allow you to control automatic model file checking/download during startup, and to select the Stable Diffusion WebUI implementation to run (Gradio vs Streamlit). You may the set <code>VALIDATE_MODELS</code> option to <code>false</code> after the initial run (once models are downloaded) to speed up startup time.</p></blockquote></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-container-instance-using-docker-compose">Create a Container Instance Using Docker Compose<a class="hash-link" href="#create-a-container-instance-using-docker-compose" title="Direct link to heading">​</a></h3><p>The default <code>docker-compose.yml</code> file  will create a Docker container instance named <code>sd-webui</code></p><ul><li>Create an instance of the Stable Diffusion WebUI image as a Docker container:<ul><li><code>docker compose up</code></li></ul></li><li>During the first run, the container image will be build containing all of the dependencies necessary to run Stable Diffusion. This build process will take several minutes to complete<ul><li>After the image build has completed, you will have a docker image for running the Stable Diffusion WebUI tagged <code>sygil-webui:dev</code></li></ul></li></ul><p>(Optional) Daemon mode:</p><ul><li>You can start the container in &quot;daemon&quot; mode by applying the <code>-d</code> option:  <code>docker compose up -d</code>. This will run the server in the background so you can close your console window without losing your work.</li><li>When running in daemon mode, you can view logging output from your container by running <code>docker logs sd-webui</code></li></ul><blockquote><p>Note: Depending on your version of Docker/Docker Compose installed, the command may be <code>docker-compose</code> (older versions) or <code>docker compose</code> (newer versions)</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="accessing-your-stable-diffusion-webui-instance">Accessing your Stable Diffusion WebUI Instance<a class="hash-link" href="#accessing-your-stable-diffusion-webui-instance" title="Direct link to heading">​</a></h3><p>The container may take several minutes to start up if model weights/checkpoints need to be downloaded. You can view progress via <code>docker compose ps</code> to see the current status or by checking the logs using <code>docker compose logs</code>.</p><p>Depending on the WebUI implementation you selected in <code>.env_docker</code>, you can access the WebUI at the following URLs:</p><ul><li>Gradio:  http://localhost:7860</li><li>Streamlit:  http://localhost:8501</li></ul><p>You can expose and access your WebUI to/from remote hosts by the machine&#x27;s IP address:
(note: This generally does not apply to Windows/WSL2 users due to WSL&#x27;s implementation)</p><ul><li>Gradio:  http://\&lt;host-ip-address<!-- -->&gt;<!-- -->:7860</li><li>Streamlit:  http://\&lt;host-ip-address<!-- -->&gt;<!-- -->:8501</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="where-is-___-stored">Where is ___ stored?<a class="hash-link" href="#where-is-___-stored" title="Direct link to heading">​</a></h3><p>By default, model weights/checkpoint files will be stored at the following path:</p><ul><li><code>./model_cache/</code></li></ul><p>Output files generated by Stable Diffusion will be stored at the following path:</p><ul><li><code>./output/</code></li></ul><p>The above paths will be accessible directly from your Docker container&#x27;s host.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="shutting-down-your-docker-container">Shutting down your Docker container<a class="hash-link" href="#shutting-down-your-docker-container" title="Direct link to heading">​</a></h3><p>You can stop your Docker container by pressing the <code>CTRL+C</code> key combination in the terminal where the container was started..</p><p>If you started the container using <code>docker compose</code>, you can stop the container with the command:</p><ul><li><code>docker compose down</code></li></ul><p>Using the default configuration, your Stable Diffusion output, cached model weights/files, etc will persist between Docker container starts.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resetting-your-docker-environment">Resetting your Docker environment<a class="hash-link" href="#resetting-your-docker-environment" title="Direct link to heading">​</a></h2><p>Should you need to do so, the included <code>docker-reset.sh</code> script will remove all docker images, stopped containers, and cached model weights/checkpoints.</p><p>You will need to re-download all associated model files/weights used by Stable Diffusion WebUI, which total to several gigabytes of data. This will occur automatically upon the next startup.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="misc-related-how-to">Misc Related How-to<a class="hash-link" href="#misc-related-how-to" title="Direct link to heading">​</a></h2><ul><li>You can obtain shell access to a running Stable Diffusion WebUI container started with Docker Compose with either of the following commands:<ul><li><code>docker exec -it st-webui /bin/bash</code></li><li><code>docker compose exec stable-diffusion bash</code></li></ul></li><li>To start a container using the Stable Diffusion WebUI Docker image without Docker Compose, you can do so with the following command:<ul><li><code>docker run --rm -it --entrypoint /bin/bash sygil-webui:dev</code></li></ul></li><li>To start a container, with mapped ports, GPU resource access, and a local directory bound as a container volume, you can do so with the following command:<ul><li><code>docker run --rm -it -p 8501:8501 -p 7860:7860 --gpus all -v $(pwd):/sd --entrypoint /bin/bash sygil-webui:dev</code></li></ul></li></ul><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dockerfile-implementation-notes">Dockerfile Implementation Notes<a class="hash-link" href="#dockerfile-implementation-notes" title="Direct link to heading">​</a></h2><p>Compared to base Stable Diffusion distribution, Conda-based package management was removed.</p><p>The Pytorch base image with Nvidia CUDA support is used as the base Docker image to simplify dependencies.</p><p>Python dependency requirements for various packages used by Stable Diffusion WebUI have been separated into different groups. During the container image build process, requirements are installed in the following order:</p><ol><li>Stable Diffusion (core) requirements (<code>sd_requirements.txt</code>)</li><li>General Requirements (<code>requirements.txt</code>)</li><li>External optional packages requirements (<code>ext_requirements.txt</code>)</li><li>WebUI requirements (<code>ui_requirements.txt</code>)</li></ol><p>Python package dependencies have been version-pinned where possible.</p><p><strong>Developers:  When developing new features or making changes to the environment that require dependency changes, please update and make notes in the appropriate file to help us better track and manage dependencies.</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-notes">Other Notes<a class="hash-link" href="#other-notes" title="Direct link to heading">​</a></h3><ul><li>The <code>root_profile</code> Docker Volume<ul><li>The <code>huggingface/transformers</code> package will download files to a cache located at <code>/root/.cache/huggingface/transformers</code> totalling nearly ~1.6 GB</li></ul></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Sygil-Dev/sygil-webui/tree/main/docs/1.Installation/4.docker-guide.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/sygil-webui/docs/Installation/linux-installation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Manual Linux Installation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/sygil-webui/docs/Streamlit/streamlit-interface"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Streamlit Web UI Interface</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#running-prebuilt-image" class="table-of-contents__link toc-highlight">Running prebuilt image</a></li><li><a href="#building-the-image" class="table-of-contents__link toc-highlight">Building the image</a><ul><li><a href="#but-what-about-amd" class="table-of-contents__link toc-highlight">But what about AMD?</a></li></ul></li><li><a href="#first-time-startup-instructions" class="table-of-contents__link toc-highlight">First-Time Startup Instructions</a><ul><li><a href="#clone-repository" class="table-of-contents__link toc-highlight">Clone Repository</a></li><li><a href="#create-a-container-instance-using-docker-compose" class="table-of-contents__link toc-highlight">Create a Container Instance Using Docker Compose</a></li><li><a href="#accessing-your-stable-diffusion-webui-instance" class="table-of-contents__link toc-highlight">Accessing your Stable Diffusion WebUI Instance</a></li><li><a href="#where-is-___-stored" class="table-of-contents__link toc-highlight">Where is ___ stored?</a></li><li><a href="#shutting-down-your-docker-container" class="table-of-contents__link toc-highlight">Shutting down your Docker container</a></li></ul></li><li><a href="#resetting-your-docker-environment" class="table-of-contents__link toc-highlight">Resetting your Docker environment</a></li><li><a href="#misc-related-how-to" class="table-of-contents__link toc-highlight">Misc Related How-to</a></li><li><a href="#dockerfile-implementation-notes" class="table-of-contents__link toc-highlight">Dockerfile Implementation Notes</a><ul><li><a href="#other-notes" class="table-of-contents__link toc-highlight">Other Notes</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/ttM8Tm6wge" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/Sygil_Dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/sygil-webui/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/Sygil-Dev/sygil-webui" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Sygil.Dev</div></div></div></footer></div>
<script src="/sygil-webui/assets/js/runtime~main.aaaad360.js"></script>
<script src="/sygil-webui/assets/js/main.c75f4128.js"></script>
</body>
</html>